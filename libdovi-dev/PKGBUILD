# Maintainer: nyfair <nyfair2012@gmail.com>
pkgname=libdovi-dev
# The pkgver is correct
pkgver=3.3.2
pkgrel=1
pkgdesc='Library to read and write Dolby Vision metadata'
arch=('x86_64')
url="https://github.com/quietvoid/dovi_tool"
license=('MIT')
makedepends=('git' 'mingw-w64-ucrt-x86_64-rust')
# Corrected the source URL to remove the "v" from the tag name
source=("git+https://github.com/quietvoid/dovi_tool.git#tag=libdovi-${pkgver}")
sha256sums=('SKIP')

build() {
  cd "${srcdir}/dovi_tool"
  cargo build --release --package libdovi
}

package() {
  cd "${srcdir}/dovi_tool"
  install -Dm644 target/release/libdovi.a "${pkgdir}/usr/lib/libdovi.a"
  install -Dm644 libdovi/include/dovi.h "${pkgdir}/usr/include/dovi.h"
  install -Dm644 libdovi/libdovi.pc "${pkgdir}/usr/lib/pkgconfig/libdovi.pc"
}
